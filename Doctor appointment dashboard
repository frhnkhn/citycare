app.get("/doctor-appointments", (req, res) => {
  const doctorId = req.query.doctorId;

  if (!doctorId) {
    return res.json({ success: false, message: "Missing doctor ID" });
  }

  const query = `
    SELECT appointments.id, appointments.date, appointments.time,
           users.name AS patientName, users.email AS patientEmail
    FROM appointments
    INNER JOIN users ON appointments.patientId = users.id
    WHERE appointments.doctorId = ?
    ORDER BY appointments.date, appointments.time
  `;

  db.all(query, [doctorId], (err, rows) => {
    if (err) return res.json({ success: false });

    res.json({
      success: true,
      appointments: rows
    });
  });
});




